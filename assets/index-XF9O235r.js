import{r as p,j as e,C as A,H as U,a as Ce}from"./index-YxVF9WTb.js";import{D as Me,e as De,g as Te,f as le,h as $e,i as ze}from"./dataService-BZLbzHqv.js";import{s as Ae,e as Oe,C as Pe,P as ie,G as Ee}from"./startOfMonth-DbDQa6FB.js";import{c as B}from"./createLucideIcon-DWULqLwT.js";import{t as Z,c as Y,n as _e,m as Re,a as Fe,i as he,e as He,f as I,C as Le}from"./format-BPLiuF2W.js";import{X as W}from"./x-CwNiEwQ8.js";import{C as X}from"./check-BNjbgBFO.js";import{C as Ie}from"./calendar-BHXcxiOI.js";import{T as Be,F as qe,C as Ue}from"./ConfirmModal-DiItsFqg.js";import{P as Ve}from"./pen-D7PGlIT7.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Qe=B("chevron-left",Ge);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Je=B("chevron-right",Ye);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ee=B("circle-check-big",We);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],J=B("clock",Xe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],ge=B("settings-2",Ke);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],et=B("timer",Ze);function fe(s,t,a){const i=Z(s,a==null?void 0:a.in);if(isNaN(t))return Y(s,NaN);if(!t)return i;const n=i.getDate(),r=Y(s,i.getTime());r.setMonth(i.getMonth()+t+1,0);const d=r.getDate();return n>=d?r:(i.setFullYear(r.getFullYear(),r.getMonth(),n),i)}function tt(s){return Y(s,Date.now())}function je(s){return t=>{const i=(s?Math[s]:Math.trunc)(t);return i===0?0:i}}function st(s,t,a){const[i,n]=_e(a==null?void 0:a.in,s,t),r=(+i-+n)/Re;return je(a==null?void 0:a.roundingMethod)(r)}function rt(s,t){return+Z(s)-+Z(t)}function oe(s,t,a){const i=rt(s,t)/Fe;return je(a==null?void 0:a.roundingMethod)(i)}function ye(s,t){return he(Y(s,s),tt(s))}function at(s,t,a){return fe(s,-1,a)}const nt=({isOpen:s,value:t,onChange:a,onClose:i})=>{const[n,r]=p.useState(t?new Date(t):new Date),d=t?new Date(t):null;if(p.useEffect(()=>{t&&r(new Date(t))},[t]),!s)return null;const m=Ae(n),o=Oe(n),u=He({start:m,end:o}),x=m.getDay(),v=Array(x).fill(null),k=["Su","Mo","Tu","We","Th","Fr","Sa"],w=g=>{a(I(g,"yyyy-MM-dd")),i()},N=()=>{a(I(new Date,"yyyy-MM-dd")),i()};return e.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:i,children:e.jsxs(A.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-gradient-to-br from-slate-800 via-slate-850 to-slate-900 border border-indigo-500/30 rounded-2xl p-4 w-full max-w-xs shadow-2xl shadow-indigo-500/20",onClick:g=>g.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:()=>r(at(n)),className:"p-2 bg-slate-700/50 hover:bg-indigo-500/30 rounded-lg text-slate-300 hover:text-white transition-colors",children:e.jsx(Qe,{size:18})}),e.jsx("h3",{className:"text-lg font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:I(n,"MMMM yyyy")}),e.jsx("button",{onClick:()=>r(fe(n,1)),className:"p-2 bg-slate-700/50 hover:bg-indigo-500/30 rounded-lg text-slate-300 hover:text-white transition-colors",children:e.jsx(Je,{size:18})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:k.map(g=>e.jsx("div",{className:"text-center text-xs font-medium text-slate-400 py-1",children:g},g))}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[v.map((g,S)=>e.jsx("div",{className:"h-9"},`pad-${S}`)),u.map(g=>{const S=d&&he(g,d),l=ye(g);return e.jsx("button",{onClick:()=>w(g),className:`h-9 w-full rounded-lg text-sm font-medium transition-all ${S?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-lg shadow-indigo-500/30":l?"bg-amber-500/20 text-amber-400 border border-amber-500/30 hover:bg-amber-500/30":"text-slate-300 hover:bg-slate-700/50 hover:text-white"}`,children:I(g,"d")},g.toISOString())})]}),e.jsxs("div",{className:"flex gap-2 mt-4 pt-3 border-t border-slate-700/50",children:[e.jsx("button",{onClick:()=>{a(""),i()},className:"flex-1 py-2 rounded-lg bg-slate-700/50 text-slate-300 hover:bg-slate-600/50 text-sm font-medium transition-colors",children:"Clear"}),e.jsx("button",{onClick:N,className:"flex-1 py-2 rounded-lg bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-sm font-medium hover:from-indigo-500 hover:to-purple-500 transition-colors shadow-lg shadow-indigo-500/25",children:"Today"})]})]})})},ce=({isOpen:s,value:t,onChange:a,onClose:i,label:n="Select Time"})=>{const[r,d]=p.useState(12),[m,o]=p.useState(0),[u,x]=p.useState(!1),v=p.useRef(null),k=p.useRef(null);if(p.useEffect(()=>{if(t){const[l,f]=t.split(":").map(Number);d(l%12||12),o(f),x(l>=12)}},[t]),p.useEffect(()=>{s&&setTimeout(()=>{var l,f,b,j;(f=(l=v.current)==null?void 0:l.querySelector(`[data-hour="${r}"]`))==null||f.scrollIntoView({block:"center",behavior:"smooth"}),(j=(b=k.current)==null?void 0:b.querySelector(`[data-min="${m}"]`))==null||j.scrollIntoView({block:"center",behavior:"smooth"})},100)},[s,r,m]),!s)return null;const w=()=>{let l=r;u&&r!==12&&(l=r+12),!u&&r===12&&(l=0),a(`${l.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`),i()},N=()=>{a(""),i()},g=Array.from({length:12},(l,f)=>f+1),S=Array.from({length:60},(l,f)=>f);return e.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:i,children:e.jsxs(A.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.2},className:"bg-gradient-to-br from-slate-800 to-slate-900 border border-indigo-500/30 rounded-2xl p-4 w-full max-w-sm shadow-2xl",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{size:18,className:"text-indigo-400"}),e.jsx("span",{className:"font-medium text-white",children:n})]}),e.jsx("button",{onClick:i,className:"p-1.5 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg text-slate-400 hover:text-white transition-colors",children:e.jsx(W,{size:16})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-4",children:[e.jsx("input",{type:"number",min:"1",max:"12",value:r,onChange:l=>{const f=parseInt(l.target.value)||1;d(Math.min(12,Math.max(1,f)))},className:"w-16 text-4xl font-bold text-white bg-slate-700/50 border border-slate-600 rounded-lg text-center py-1 focus:border-indigo-500 focus:outline-none"}),e.jsx("span",{className:"text-4xl font-bold text-slate-500",children:":"}),e.jsx("input",{type:"number",min:"0",max:"59",value:m.toString().padStart(2,"0"),onChange:l=>{const f=parseInt(l.target.value)||0;o(Math.min(59,Math.max(0,f)))},className:"w-16 text-4xl font-bold text-white bg-slate-700/50 border border-slate-600 rounded-lg text-center py-1 focus:border-indigo-500 focus:outline-none"}),e.jsx("button",{onClick:()=>x(!u),className:"ml-2 px-3 py-2 rounded-lg bg-indigo-500/20 hover:bg-indigo-500/30 text-indigo-400 text-xl font-bold transition-colors",children:u?"PM":"AM"})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-slate-400 text-center mb-1 uppercase font-medium",children:"Hour"}),e.jsx("div",{ref:v,className:"h-40 overflow-y-auto bg-slate-900/50 rounded-xl border border-slate-700/50 scrollbar-hide",children:g.map(l=>e.jsx("button",{"data-hour":l,onClick:()=>d(l),className:`w-full py-3 text-center text-lg font-medium transition-all ${r===l?"bg-indigo-500 text-white":"text-slate-300 hover:bg-slate-700/50"}`,children:l.toString().padStart(2,"0")},l))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-slate-400 text-center mb-1 uppercase font-medium",children:"Min"}),e.jsx("div",{ref:k,className:"h-40 overflow-y-auto bg-slate-900/50 rounded-xl border border-slate-700/50 scrollbar-hide",children:S.map(l=>e.jsx("button",{"data-min":l,onClick:()=>o(l),className:`w-full py-3 text-center text-lg font-medium transition-all ${m===l?"bg-indigo-500 text-white":"text-slate-300 hover:bg-slate-700/50"}`,children:l.toString().padStart(2,"0")},l))})]}),e.jsxs("div",{className:"w-20",children:[e.jsx("div",{className:"text-xs text-slate-400 text-center mb-1 uppercase font-medium",children:"Period"}),e.jsxs("div",{className:"h-40 flex flex-col gap-2 justify-center",children:[e.jsx("button",{onClick:()=>x(!1),className:`flex-1 rounded-xl text-lg font-bold transition-all ${u?"bg-slate-700/50 text-slate-400 hover:bg-slate-600/50":"bg-indigo-500 text-white"}`,children:"AM"}),e.jsx("button",{onClick:()=>x(!0),className:`flex-1 rounded-xl text-lg font-bold transition-all ${u?"bg-indigo-500 text-white":"bg-slate-700/50 text-slate-400 hover:bg-slate-600/50"}`,children:"PM"})]})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[{h:9,m:0,pm:!1},{h:12,m:0,pm:!0},{h:6,m:0,pm:!0},{h:9,m:0,pm:!0}].map(({h:l,m:f,pm:b})=>e.jsxs("button",{onClick:()=>{d(l),o(f),x(b)},className:"py-2 rounded-lg bg-slate-700/50 hover:bg-indigo-500/30 text-slate-300 hover:text-white text-sm font-medium transition-colors",children:[l,b?"PM":"AM"]},`${l}-${b}`))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:N,className:"flex-1 py-2.5 rounded-xl bg-slate-700/50 text-slate-300 hover:bg-slate-600/50 font-medium transition-colors",children:"Clear"}),e.jsxs("button",{onClick:w,className:"flex-1 py-2.5 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-medium flex items-center justify-center gap-2 shadow-lg shadow-indigo-500/25",children:[e.jsx(X,{size:16}),"Done"]})]})]})})},lt=({isOpen:s,value:t,onChange:a,onClose:i,label:n="Duration"})=>{const[r,d]=p.useState(0),[m,o]=p.useState(0);if(p.useEffect(()=>{t>0?(d(Math.floor(t/60)),o(t%60)):(d(0),o(0))},[t]),!s)return null;const u=()=>{const w=r*60+m;a(w),i()},x=()=>{a(0),i()},v=[{label:"30m",value:30},{label:"1h",value:60},{label:"1h 30m",value:90},{label:"2h",value:120},{label:"3h",value:180},{label:"4h",value:240}],k=w=>{const N=Math.floor(w/60),g=w%60;d(N),o(g)};return e.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:i,children:e.jsxs(A.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-gradient-to-br from-slate-800 via-slate-850 to-slate-900 border border-indigo-500/30 rounded-3xl p-5 w-full max-w-xs shadow-2xl shadow-indigo-500/20",onClick:w=>w.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{size:18,className:"text-indigo-400"}),e.jsx("span",{className:"text-sm font-medium text-slate-400",children:n})]}),e.jsx("button",{onClick:i,className:"p-1.5 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg text-slate-400 hover:text-white transition-colors",children:e.jsx(W,{size:16})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-5",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:r.toString().padStart(2,"0")}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Hours"})]}),e.jsx("span",{className:"text-4xl font-bold text-slate-500",children:":"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:m.toString().padStart(2,"0")}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Minutes"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Hours"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>d(Math.max(0,r-1)),className:"px-3 py-2 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg text-slate-300",children:"-"}),e.jsx("input",{type:"number",min:"0",max:"23",value:r,onChange:w=>d(Math.min(23,Math.max(0,parseInt(w.target.value)||0))),className:"w-12 text-center bg-slate-900 border border-slate-600 rounded-lg py-2 text-white text-sm focus:border-indigo-500 outline-none"}),e.jsx("button",{onClick:()=>d(Math.min(23,r+1)),className:"px-3 py-2 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg text-slate-300",children:"+"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Minutes"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>o(Math.max(0,m-5)),className:"px-3 py-2 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg text-slate-300",children:"-"}),e.jsx("input",{type:"number",min:"0",max:"55",step:"5",value:m,onChange:w=>o(Math.min(55,Math.max(0,parseInt(w.target.value)||0))),className:"w-12 text-center bg-slate-900 border border-slate-600 rounded-lg py-2 text-white text-sm focus:border-indigo-500 outline-none"}),e.jsx("button",{onClick:()=>o(Math.min(55,m+5)),className:"px-3 py-2 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg text-slate-300",children:"+"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-2",children:"Quick Select"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:v.map(({label:w,value:N})=>{const g=r*60+m===N;return e.jsx("button",{onClick:()=>k(N),className:`py-2 px-3 rounded-lg text-xs font-medium transition-all ${g?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white":"bg-slate-700/50 text-slate-300 hover:bg-slate-600/50"}`,children:w},N)})})]}),e.jsxs("div",{className:"flex gap-2 pt-3 border-t border-slate-700/50",children:[e.jsx("button",{onClick:x,className:"flex-1 py-2 rounded-lg bg-slate-700/50 text-slate-300 hover:bg-slate-600/50 text-sm font-medium transition-colors",children:"Clear"}),e.jsxs("button",{onClick:u,className:"flex-1 py-2 rounded-lg bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-sm font-medium hover:from-indigo-500 hover:to-purple-500 transition-colors shadow-lg shadow-indigo-500/25 flex items-center justify-center gap-2",children:[e.jsx(X,{size:14}),"Confirm"]})]})]})})},it=s=>{if(!s)return{hours:"--",minutes:"--",ampm:""};const t=s.split(":");if(t.length!==2)return{hours:"--",minutes:"--",ampm:""};const a=parseInt(t[0])||0,i=parseInt(t[1])||0,n=a>=12?"PM":"AM";return{hours:(a%12||12).toString().padStart(2,"0"),minutes:i.toString().padStart(2,"0"),ampm:n}},G=({digit:s})=>e.jsx("div",{className:"relative w-[0.55em] h-[1.1em] overflow-hidden inline-flex justify-center",children:e.jsx(U,{mode:"popLayout",initial:!1,children:e.jsx(A.span,{initial:{y:-15,opacity:0},animate:{y:0,opacity:1},exit:{y:15,opacity:0},transition:{duration:.1,ease:"easeOut"},className:"absolute",children:s},s)})}),de=({time:s,isAutoCalculated:t=!1,className:a=""})=>{const[i,n]=p.useState(s),r=p.useRef(s),d=p.useRef(null);p.useEffect(()=>{if(d.current&&(clearInterval(d.current),d.current=null),s!==r.current&&t&&s&&r.current){const[x,v]=r.current.split(":").map(Number),[k,w]=s.split(":").map(Number),N=x*60+v,S=k*60+w-N,l=Math.min(Math.abs(S),12),f=80;let b=0;l>0?d.current=setInterval(()=>{b++;const j=b/l,C=1-Math.pow(1-j,2);let T=Math.round(N+S*C);T<0&&(T+=1440),T>=1440&&(T-=1440);const z=Math.floor(T/60),P=T%60;n(`${z.toString().padStart(2,"0")}:${P.toString().padStart(2,"0")}`),b>=l&&(clearInterval(d.current),n(s))},f):n(s)}else n(s);return r.current=s,()=>{d.current&&clearInterval(d.current)}},[s,t]);const{hours:m,minutes:o,ampm:u}=it(i);return e.jsxs("span",{className:`inline-flex items-center font-mono text-sm ${a}`,children:[e.jsx(G,{digit:m[0]}),e.jsx(G,{digit:m[1]}),e.jsx("span",{className:"mx-0.5",children:":"}),e.jsx(G,{digit:o[0]}),e.jsx(G,{digit:o[1]}),u&&e.jsx("span",{className:"ml-1 text-xs text-slate-400",children:u})]})},ot={en:{title:"Title",description:"Description",subject:"Subject",dueDate:"Due",type:"Type",priority:"Priority",status:"Status",startTime:"Start",endTime:"End",duration:"Duration",cancel:"Cancel",save:"Save",editTitle:"Edit Task",newTitle:"New Task",placeholder:"Task name",descPlaceholder:"Description (optional)",select:"Select...",selectDate:"Select date",selectTime:"Select time"},bn:{title:"শিরোনাম",description:"বিবরণ",subject:"বিষয়",dueDate:"তারিখ",type:"ধরন",priority:"গুরুত্ব",status:"স্ট্যাটাস",startTime:"শুরু",endTime:"শেষ",duration:"সময়কাল",cancel:"বাতিল",save:"সংরক্ষণ",editTitle:"সম্পাদনা",newTitle:"নতুন টাস্ক",placeholder:"টাস্কের নাম",descPlaceholder:"বিবরণ (ঐচ্ছিক)",select:"নির্বাচন...",selectDate:"তারিখ নির্বাচন",selectTime:"সময় নির্বাচন"}},ct=(s,t)=>{if(!s||!t)return 0;const[a,i]=s.split(":").map(Number),[n,r]=t.split(":").map(Number);let d=n*60+r-(a*60+i);return d<0&&(d+=1440),d},dt=s=>{if(s<=0)return"--";const t=Math.floor(s/60),a=s%60;return t===0?`${a}m`:a===0?`${t}h`:`${t}h ${a}m`},ue=(s,t)=>{if(!s||t<=0)return"";const[a,i]=s.split(":").map(Number);let n=a*60+i+t;n=n%1440;const r=Math.floor(n/60),d=n%60;return`${r.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`},me=(s,t)=>{if(!s||t<=0)return"";const[a,i]=s.split(":").map(Number);let n=a*60+i-t;n<0&&(n+=1440);const r=Math.floor(n/60),d=n%60;return`${r.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`},ut=s=>s?new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",mt=({isOpen:s,editingId:t,title:a,description:i,subject:n,date:r,type:d,priority:m,status:o,startTime:u,endTime:x,setTitle:v,setDescription:k,setSubject:w,setDate:N,setType:g,setPriority:S,setStatus:l,setStartTime:f,setEndTime:b,onSubmit:j,onClose:C,subjects:T,types:z,statuses:P,priorities:$,lang:F="bn"})=>{const[K,c]=p.useState(!1),[y,D]=p.useState(!1),[E,R]=p.useState(!1),[q,te]=p.useState(!1),[_,se]=p.useState(0),[re,H]=p.useState(null),ae=p.useRef(u),ne=p.useRef(x);if(p.useEffect(()=>{u&&x&&se(ct(u,x))},[u,x]),!s)return null;const M=ot[F],L="w-full bg-slate-900 border border-slate-600 rounded-lg p-2.5 text-white text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none transition-all",O="block text-xs uppercase font-bold text-slate-400 mb-1",V="w-full bg-slate-900 border border-slate-600 rounded-lg p-2.5 text-sm cursor-pointer hover:border-indigo-500/50 transition-all flex items-center justify-between gap-2 min-h-[42px]",we=h=>{ae.current=u,f(h),H(null),_>0&&!x&&(H("end"),b(ue(h,_)))},ke=h=>{ne.current=x,b(h),H(null),_>0&&!u&&(H("start"),f(me(h,_)))},Se=h=>{se(h),!(h<=0)&&(u?(ne.current=x,H("end"),b(ue(u,h))):x&&(ae.current=u,H("start"),f(me(x,h))))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",onClick:C,children:e.jsxs(A.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"bg-gradient-to-br from-slate-800 to-slate-900 border border-indigo-500/30 rounded-2xl p-6 w-full max-w-lg shadow-2xl overflow-y-auto max-h-[90vh]",onClick:h=>h.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent mb-4",children:t?M.editTitle:M.newTitle}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:O,children:M.title}),e.jsx("input",{required:!0,value:a,onChange:h=>v(h.target.value),className:L,placeholder:M.placeholder})]}),e.jsxs("div",{children:[e.jsx("label",{className:O,children:M.description}),e.jsx("textarea",{value:i,onChange:h=>k(h.target.value),rows:2,className:L+" resize-none",placeholder:M.descPlaceholder})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:O,children:M.subject}),e.jsxs("select",{required:!0,value:n,onChange:h=>w(h.target.value),className:L,children:[e.jsx("option",{value:"",children:M.select}),T.map(h=>e.jsx("option",{value:h,children:h},h))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:O,children:M.dueDate}),e.jsxs("button",{type:"button",onClick:()=>c(!0),className:V,children:[e.jsx("span",{className:r?"text-white":"text-slate-500",children:r?ut(r):M.selectDate}),e.jsx(Ie,{size:16,className:"text-indigo-400"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:O,children:M.startTime}),e.jsxs("button",{type:"button",onClick:()=>D(!0),className:V,children:[u?e.jsx(de,{time:u,isAutoCalculated:re==="start",className:"text-white"}):e.jsx("span",{className:"text-slate-500",children:"--:--"}),e.jsx(J,{size:14,className:"text-indigo-400 flex-shrink-0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:O,children:M.endTime}),e.jsxs("button",{type:"button",onClick:()=>R(!0),className:V,children:[x?e.jsx(de,{time:x,isAutoCalculated:re==="end",className:"text-white"}):e.jsx("span",{className:"text-slate-500",children:"--:--"}),e.jsx(J,{size:14,className:"text-indigo-400 flex-shrink-0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:O,children:M.duration}),e.jsxs("button",{type:"button",onClick:()=>te(!0),className:V+" relative overflow-hidden",children:[e.jsx(A.span,{initial:{scale:.5,opacity:0,y:-10},animate:{scale:[1,1.15,1],opacity:1,y:0,color:_>0?["#818cf8","#c084fc","#818cf8"]:"#64748b"},transition:{duration:.6,scale:{duration:.4},color:{duration:.8,repeat:0}},className:"font-mono font-bold",children:dt(_)},_),e.jsx(et,{size:14,className:"text-indigo-400 flex-shrink-0"}),e.jsx(A.div,{initial:{opacity:.8,scale:.8},animate:{opacity:0,scale:1.5},transition:{duration:.5},className:"absolute inset-0 bg-indigo-500/20 rounded-lg pointer-events-none"},`glow-${_}`)]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:O,children:M.type}),e.jsx("select",{value:d,onChange:h=>g(h.target.value),className:L,children:z.map(h=>e.jsx("option",{value:h,children:h},h))})]}),e.jsxs("div",{children:[e.jsx("label",{className:O,children:M.priority}),e.jsx("select",{value:m,onChange:h=>S(h.target.value),className:L,children:$.map(h=>e.jsx("option",{value:h,children:h},h))})]}),e.jsxs("div",{children:[e.jsx("label",{className:O,children:M.status}),e.jsx("select",{value:o,onChange:h=>l(h.target.value),className:L,children:P.map(h=>e.jsx("option",{value:h,children:h},h))})]})]}),e.jsxs("div",{className:"flex gap-3 mt-4 pt-4 border-t border-slate-700",children:[e.jsx("button",{type:"button",onClick:C,className:"flex-1 py-2.5 rounded-xl bg-slate-700 text-slate-300 hover:bg-slate-600 font-medium",children:M.cancel}),e.jsx("button",{type:"submit",className:"flex-1 py-2.5 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white hover:from-indigo-500 hover:to-purple-500 font-medium shadow-lg shadow-indigo-500/25",children:M.save})]})]})]})}),e.jsx(nt,{isOpen:K,value:r,onChange:N,onClose:()=>c(!1)}),e.jsx(ce,{isOpen:y,value:u,onChange:we,onClose:()=>D(!1),label:F==="en"?"Start Time":"শুরুর সময়"}),e.jsx(ce,{isOpen:E,value:x,onChange:ke,onClose:()=>R(!1),label:F==="en"?"End Time":"শেষ সময়"}),e.jsx(lt,{isOpen:q,value:_,onChange:Se,onClose:()=>te(!1),label:F==="en"?"Duration":"সময়কাল"})]})},xe=({value:s,options:t,onChange:a,placeholder:i="Select...",className:n=""})=>{const[r,d]=p.useState(!1),m=p.useRef(null),o=t.find(x=>x.value===s);p.useEffect(()=>{const x=v=>{m.current&&!m.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const u=x=>{a(x),d(!1)};return e.jsxs("div",{ref:m,className:`relative ${n}`,children:[e.jsxs("button",{type:"button",onClick:()=>d(!r),className:`
                    flex items-center justify-between gap-2 
                    bg-slate-800/80 hover:bg-slate-700/80 
                    border border-slate-600/50 hover:border-indigo-500/50
                    rounded-xl px-3 py-2 
                    text-sm text-white 
                    cursor-pointer transition-all
                    min-w-[100px] md:min-w-[120px]
                    ${r?"border-indigo-500/50 ring-1 ring-indigo-500/30":""}
                `,children:[e.jsx("span",{className:o?"text-white":"text-slate-400",children:(o==null?void 0:o.label)||i}),e.jsx(Pe,{size:14,className:`text-slate-400 transition-transform duration-200 ${r?"rotate-180":""}`})]}),e.jsx(U,{children:r&&e.jsx(A.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},className:`absolute z-50 top-full left-0 mt-1 w-full min-w-[140px] \r
                                   bg-gradient-to-br from-slate-800 to-slate-900 \r
                                   border border-indigo-500/30 rounded-xl \r
                                   shadow-xl shadow-black/30 overflow-hidden`,children:e.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar py-1",children:t.map((x,v)=>{const k=x.value===s;return e.jsxs("button",{type:"button",onClick:()=>u(x.value),className:`
                                            w-full flex items-center justify-between gap-2 
                                            px-3 py-2 text-sm text-left
                                            transition-colors
                                            ${k?"bg-indigo-500/20 text-indigo-300":"text-slate-300 hover:bg-slate-700/50 hover:text-white"}
                                        `,children:[e.jsx("span",{children:x.label}),k&&e.jsx(X,{size:14,className:"text-indigo-400"})]},x.value)})})})})]})},xt=({title:s,subjectFilter:t,statusFilter:a,subjects:i,onSubjectChange:n,onStatusChange:r,onAddClick:d,t:m})=>{const o=[{value:"All",label:m.allSubjects},...i.map(x=>({value:x,label:x}))],u=[{value:"All",label:m.allStatus},{value:"Pending",label:m.pending},{value:"Completed",label:m.completed}];return e.jsxs("div",{className:"bg-gradient-to-r from-amber-600/20 to-orange-600/10 border border-amber-500/20 p-2 md:p-3 rounded-2xl flex flex-wrap items-center justify-between gap-2 md:gap-4 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-4 flex-wrap",children:[e.jsxs("h2",{className:"text-sm md:text-lg font-bold text-white px-2 md:px-3 border-r border-white/10 flex items-center gap-2",children:[e.jsxs("span",{className:"w-6 h-6 md:w-8 md:h-8 bg-amber-500 rounded-lg flex items-center justify-center shadow-lg shadow-amber-500/30",children:[e.jsx(ee,{size:14,className:"md:hidden"}),e.jsx(ee,{size:18,className:"hidden md:block"})]}),e.jsx("span",{className:"hidden sm:inline",children:s})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{value:t,options:o,onChange:n,placeholder:m.allSubjects}),e.jsx(xe,{value:a,options:u,onChange:r,placeholder:m.allStatus})]})]}),e.jsxs("button",{onClick:d,className:"flex items-center gap-1 md:gap-2 bg-amber-500 hover:bg-amber-400 text-white px-3 md:px-4 py-1.5 md:py-2 rounded-xl text-xs md:text-sm font-bold shadow-lg shadow-amber-500/30 hover:scale-105 transition-all shrink-0",children:[e.jsx(ie,{size:14,className:"md:hidden"}),e.jsx(ie,{size:16,className:"hidden md:block"}),e.jsx("span",{children:m.new})]})]})},bt=(s,t)=>{if(!s||!t)return"-";const[a,i]=s.split(":").map(Number),[n,r]=t.split(":").map(Number);let d=n*60+r-(a*60+i);d<0&&(d+=1440);const m=Math.floor(d/60),o=d%60;return m===0?`${o}m`:o===0?`${m}h`:`${m}h ${o}m`},Ne=(s,t)=>{const a=new Date,i=new Date(s.dueDate);if(s.startTime&&ye(i)){const[o,u]=s.startTime.split(":").map(Number),x=new Date;x.setHours(o,u,0,0);const v=oe(x,a);if(v>0){const k=Math.floor(v/60),w=v%60;return k===0?{label:t==="en"?`${w}m to start`:`${w}মি. শুরু`,color:"bg-sky-500/90 text-white",type:"to_start"}:{label:t==="en"?`${k}h ${w}m to start`:`${k}ঘ ${w}মি শুরু`,color:"bg-sky-500/80 text-white",type:"to_start"}}}if(s.endTime){const[o,u]=s.endTime.split(":").map(Number);i.setHours(o,u,0,0)}else if(s.startTime){const[o,u]=s.startTime.split(":").map(Number);i.setHours(o,u,0,0)}else i.setHours(23,59,59,0);const n=oe(i,a),r=st(i,a);if(n<0){const o=Math.abs(r);if(o<1)return{label:t==="en"?`${Math.abs(n)}m ago`:`${Math.abs(n)}মি আগে`,color:"bg-red-500/90 text-white",type:"overdue"};if(o<24)return{label:t==="en"?`${o}h ago`:`${o}ঘ আগে`,color:"bg-red-500/90 text-white",type:"overdue"};{const u=Math.floor(o/24);return{label:t==="en"?`${u}d ago`:`${u}দিন আগে`,color:"bg-red-600/90 text-white",type:"overdue"}}}if(n<=60)return{label:t==="en"?`${n}m left`:`${n}মি বাকি`,color:"bg-rose-500 text-white animate-pulse",type:"left"};if(n<=1440){const o=Math.floor(n/60),u=n%60;return u>0?{label:t==="en"?`${o}h ${u}m left`:`${o}ঘ ${u}মি বাকি`,color:o<=3?"bg-amber-500 text-white":"bg-yellow-500/90 text-white",type:"left"}:{label:t==="en"?`${o}h left`:`${o}ঘ বাকি`,color:o<=3?"bg-amber-500 text-white":"bg-yellow-500/90 text-white",type:"left"}}const d=Math.ceil(n/1440);return{label:t==="en"?`${d}d left`:`${d}দিন বাকি`,color:d<=3?"bg-orange-500/80 text-white":"bg-slate-600 text-slate-200",type:"upcoming"}},At=(s,t)=>Ne(s,t),be=s=>{const t=(s==null?void 0:s.toLowerCase())||"";return t.includes("urgent")||t.includes("জরুরি")||t.includes("high")?{text:"text-red-300",pillBg:"bg-red-500/25",border:"border-l-red-500",rowBg:"border-l-2 border-l-red-500",glow:"0 0 8px rgba(239, 68, 68, 0.4)"}:t.includes("medium")||t.includes("মাঝারি")?{text:"text-amber-300",pillBg:"bg-amber-500/25",border:"border-l-amber-500",rowBg:"border-l-2 border-l-amber-400",glow:"0 0 8px rgba(245, 158, 11, 0.3)"}:{text:"text-emerald-300",pillBg:"bg-emerald-500/20",border:"border-l-emerald-600",rowBg:"border-l-2 border-l-emerald-600",glow:"0 0 6px rgba(16, 185, 129, 0.2)"}},pt=s=>{const t=(s==null?void 0:s.toLowerCase())||"";return t.includes("complete")||t.includes("সম্পন্ন")||t.includes("done")?"bg-emerald-500/30 text-emerald-300 border-emerald-400/50 shadow-emerald-500/20":t.includes("progress")||t.includes("চলছে")||t.includes("ongoing")?"bg-amber-500/30 text-amber-300 border-amber-400/50 shadow-amber-500/20":"bg-slate-500/30 text-slate-300 border-slate-400/50"},ve=s=>{const t=(s==null?void 0:s.toLowerCase())||"";return t.includes("exam")||t.includes("পরীক্ষা")?{bg:"bg-rose-500/25",text:"text-rose-300",border:"border-rose-500/40"}:t.includes("quiz")||t.includes("কুইজ")?{bg:"bg-amber-500/25",text:"text-amber-300",border:"border-amber-500/40"}:t.includes("project")||t.includes("প্রজেক্ট")?{bg:"bg-indigo-500/25",text:"text-indigo-300",border:"border-indigo-500/40"}:t.includes("assignment")||t.includes("অ্যাসাইনমেন্ট")?{bg:"bg-blue-500/25",text:"text-blue-300",border:"border-blue-500/40"}:t.includes("lab")||t.includes("ল্যাব")?{bg:"bg-cyan-500/25",text:"text-cyan-300",border:"border-cyan-500/40"}:t.includes("presentation")||t.includes("প্রেজেন্টেশন")?{bg:"bg-purple-500/25",text:"text-purple-300",border:"border-purple-500/40"}:{bg:"bg-slate-500/20",text:"text-slate-300",border:"border-slate-500/30"}},Ot=s=>ve(s).text,ht=["taskName","subject","duration","time","date","priority","status","actions"],Q=["border-b-rose-500/30","border-b-orange-500/30","border-b-amber-500/30","border-b-yellow-500/30","border-b-lime-500/30","border-b-green-500/30","border-b-emerald-500/30","border-b-teal-500/30","border-b-cyan-500/30","border-b-sky-500/30","border-b-blue-500/30","border-b-indigo-500/30","border-b-violet-500/30","border-b-purple-500/30","border-b-fuchsia-500/30","border-b-pink-500/30"],gt=({isOpen:s,title:t,description:a,onClose:i})=>s?e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",onClick:i,children:e.jsxs(A.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-gradient-to-br from-slate-800 to-slate-900 border border-indigo-500/30 rounded-2xl p-5 w-full max-w-md shadow-2xl",onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-500/20 rounded-lg flex items-center justify-center",children:e.jsx(qe,{size:16,className:"text-indigo-400"})}),e.jsx("h3",{className:"text-lg font-bold text-white",children:t})]}),e.jsx("button",{onClick:i,className:"p-1.5 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg text-slate-400 hover:text-white transition-colors",children:e.jsx(W,{size:16})})]}),e.jsx("div",{className:"bg-slate-900/50 border border-slate-700/50 rounded-xl p-4",children:e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed whitespace-pre-wrap",children:a||"No description available."})}),e.jsx("button",{onClick:i,className:"w-full mt-4 py-2.5 rounded-xl bg-indigo-600/80 hover:bg-indigo-500/80 text-white font-medium transition-colors",children:"Close"})]})}):null,ft=({isOpen:s,columns:t,columnLabels:a,onSave:i,onClose:n})=>{const[r,d]=p.useState(t),[m,o]=p.useState(null),[u,x]=p.useState(null);if(p.useEffect(()=>{d(t)},[t,s]),!s)return null;const v=(N,g)=>{o(g),N.dataTransfer.effectAllowed="move"},k=(N,g)=>{N.preventDefault(),g!==m&&x(g)},w=(N,g)=>{if(N.preventDefault(),m&&m!==g){const S=r.indexOf(m),l=r.indexOf(g),f=[...r];f.splice(S,1),f.splice(l,0,m),d(f)}o(null),x(null)};return e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",onClick:n,children:e.jsxs(A.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-gradient-to-br from-slate-800 to-slate-900 border border-amber-500/30 rounded-2xl p-5 w-full max-w-md shadow-2xl",onClick:N=>N.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-500/20 rounded-lg flex items-center justify-center",children:e.jsx(ge,{size:16,className:"text-amber-400"})}),e.jsx("h3",{className:"text-lg font-bold text-white",children:"Reorder Columns"})]}),e.jsx("button",{onClick:n,className:"p-1.5 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg text-slate-400 hover:text-white transition-colors",children:e.jsx(W,{size:16})})]}),e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Drag columns to reorder them:"}),e.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:r.map((N,g)=>e.jsxs("div",{draggable:!0,onDragStart:S=>v(S,N),onDragOver:S=>k(S,N),onDrop:S=>w(S,N),onDragEnd:()=>{o(null),x(null)},className:`flex items-center gap-3 p-3 rounded-xl border transition-all cursor-grab active:cursor-grabbing
                                ${m===N?"opacity-50 bg-slate-700 border-amber-500/50":"bg-slate-800/50 border-slate-700/50 hover:border-amber-500/30"}
                                ${u===N?"border-t-2 border-t-amber-400":""}`,children:[e.jsx(Ee,{size:16,className:"text-slate-500"}),e.jsx("span",{className:"text-slate-200 font-medium flex-1",children:a[N]||N}),e.jsx("span",{className:"text-xs text-slate-500 bg-slate-700/50 px-2 py-0.5 rounded",children:g+1})]},N))}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsx("button",{onClick:n,className:"flex-1 py-2.5 rounded-xl bg-slate-700 text-slate-300 hover:bg-slate-600 font-medium transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:()=>{i(r),n()},className:"flex-1 py-2.5 rounded-xl bg-amber-600 hover:bg-amber-500 text-white font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(X,{size:16})," Save Order"]})]})]})})},jt=({assignments:s,t,lang:a,onEdit:i,onDelete:n,onToggleStatus:r,onAddClick:d})=>{const[m,o]=p.useState({isOpen:!1,title:"",description:""}),[u,x]=p.useState(()=>{const b=localStorage.getItem("assignment_column_order");return b?JSON.parse(b):ht}),[v,k]=p.useState(!1),w={taskName:t.taskName||"Task Name",subject:t.subject||"Subject",duration:"Duration",time:t.time||"Time",date:t.dueDate||"Date",priority:t.priority||"Priority",status:t.status||"Status",actions:t.actions||"Actions"},N=b=>{o({isOpen:!0,title:b.title,description:b.description||""})},g=()=>{o({isOpen:!1,title:"",description:""})},S=b=>{x(b),localStorage.setItem("assignment_column_order",JSON.stringify(b))},l=(b,j,C)=>{const T=Ne(j,a),z=be(j.priority);ve(j.type);const P=bt(j.startTime,j.endTime),$=Q[C%Q.length];switch(b){case"taskName":return e.jsx("td",{className:`py-1.5 px-1.5 md:px-2 border-b ${$} border-r border-r-purple-500/20 bg-slate-900/80 sticky left-6 z-10`,children:e.jsxs("div",{className:"flex items-center justify-between gap-1",children:[e.jsx("span",{className:"text-white font-medium truncate max-w-[60px] md:max-w-[100px]",children:j.title}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx("span",{className:`text-[7px] md:text-[8px] font-bold px-1.5 py-0.5 rounded-full whitespace-nowrap ${T.color}`,children:T.label}),j.description&&e.jsx("button",{onClick:()=>N(j),className:"p-0.5 text-amber-400 hover:text-amber-300 transition-colors flex-shrink-0 bg-amber-500/10 rounded hover:bg-amber-500/20",title:"View description",children:e.jsx(Le,{size:12})})]})]})},b);case"subject":return e.jsx("td",{className:`py-1.5 px-1.5 md:px-2 border-b ${$} border-r border-r-blue-500/20`,children:e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-indigo-500/20 text-indigo-300 font-medium text-[9px] md:text-[10px] border border-indigo-500/30 whitespace-nowrap",children:j.subject})},b);case"duration":return e.jsx("td",{className:`py-1.5 px-1.5 md:px-2 border-b ${$} border-r border-r-lime-500/20 text-center`,children:e.jsx("span",{className:"text-lime-400 font-mono text-[9px] md:text-[10px] bg-lime-500/10 px-1.5 py-0.5 rounded",children:P})},b);case"time":return e.jsx("td",{className:`py-1.5 px-1.5 md:px-2 border-b ${$} border-r border-r-emerald-500/20`,children:e.jsx("span",{className:"text-purple-400 font-mono text-[9px] md:text-[10px] whitespace-nowrap",children:j.startTime&&j.endTime?e.jsxs("span",{className:"bg-purple-500/10 px-1.5 py-0.5 rounded",children:[j.startTime,"-",j.endTime]}):e.jsx("span",{className:"text-slate-600",children:"-"})})},b);case"date":return e.jsx("td",{className:`py-1.5 px-1.5 md:px-2 border-b ${$} border-r border-r-teal-500/20`,children:e.jsx("span",{className:"text-cyan-400 font-mono text-[9px] md:text-[10px] bg-cyan-500/10 px-1.5 py-0.5 rounded",children:I(new Date(j.dueDate),"dd MMM")})},b);case"priority":return e.jsx("td",{className:`py-1.5 px-1.5 md:px-2 border-b ${$} border-r border-r-amber-500/20`,children:e.jsx("span",{className:`px-2 py-0.5 rounded-full font-bold text-[9px] md:text-[10px] ${z.pillBg} ${z.text} shadow-sm`,style:{boxShadow:z.glow},children:j.priority||"-"})},b);case"status":return e.jsx("td",{className:`py-1.5 px-1.5 md:px-2 border-b ${$} border-r border-r-rose-500/20`,children:e.jsx("button",{onClick:()=>r(j),className:`px-2 py-0.5 text-[9px] md:text-[10px] font-bold rounded-full border transition-all hover:scale-105 active:scale-95 ${pt(j.status)}`,children:j.status})},b);case"actions":return e.jsx("td",{className:`py-1.5 px-1.5 md:px-2 text-center border-b ${$}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:[e.jsx("button",{onClick:()=>i(j),className:"p-1 bg-indigo-500/20 hover:bg-indigo-500/40 text-indigo-400 rounded-md transition-all hover:scale-110 active:scale-95",children:e.jsx(Ve,{size:10})}),e.jsx("button",{onClick:()=>n(j.id),className:"p-1 bg-rose-500/20 hover:bg-rose-500/40 text-rose-400 rounded-md transition-all hover:scale-110 active:scale-95",children:e.jsx(Be,{size:10})})]})},b);default:return null}},f=b=>{const j={taskName:"border-r-purple-500/30",subject:"border-r-blue-500/30",duration:"border-r-lime-500/30",time:"border-r-emerald-500/30",date:"border-r-teal-500/30",priority:"border-r-amber-500/30",status:"border-r-rose-500/30",actions:""},C={taskName:"min-w-[130px]",actions:"w-14"};return e.jsx("th",{className:`py-2 px-1.5 md:px-2 border-b-2 border-b-indigo-500/50 border-r ${j[b]||""} ${C[b]||""} ${b==="taskName"?"bg-slate-800 sticky left-6 z-20":""}`,children:w[b]},b)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 bg-slate-900/80 backdrop-blur-sm border border-white/10 rounded-xl overflow-hidden flex flex-col shadow-xl relative",children:e.jsxs("div",{className:"overflow-x-auto flex-1 custom-scrollbar",children:[e.jsxs("table",{className:"w-full text-left border-separate border-spacing-0 text-[10px] md:text-xs min-w-[700px]",children:[e.jsx("thead",{className:"sticky top-0 z-10",children:e.jsxs("tr",{className:"bg-gradient-to-r from-slate-800 via-slate-800/95 to-slate-800 text-slate-300 font-semibold uppercase tracking-wider",children:[e.jsx("th",{className:"py-2 px-1.5 md:px-2 w-8 text-center border-b-2 border-b-indigo-500/50 border-r border-r-indigo-500/30 bg-slate-800 sticky left-0 z-20",children:e.jsx("button",{onClick:()=>k(!0),className:"p-1 hover:bg-amber-500/20 rounded transition-colors",title:"Reorder columns",children:e.jsx(ge,{size:12,className:"text-amber-400"})})}),u.map(b=>f(b))]})}),e.jsx("tbody",{children:e.jsx(U,{children:s.map((b,j)=>{const C=j%2===0,T=be(b.priority),z=Q[j%Q.length];return e.jsxs(A.tr,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},transition:{duration:.2,delay:j*.02},className:`group hover:bg-white/5 transition-all duration-150 ${C?"bg-slate-900/50":"bg-slate-800/30"} ${T.rowBg}`,children:[e.jsx("td",{className:`py-1.5 px-1.5 md:px-2 text-center text-slate-500 font-mono text-[9px] border-b ${z} border-r border-r-indigo-500/20 bg-slate-900/80 sticky left-0 z-10`,children:j+1}),u.map(P=>l(P,b,j))]},b.id)})})})]}),s.length===0&&e.jsx(yt,{t})]})}),e.jsx(U,{children:m.isOpen&&e.jsx(gt,{isOpen:m.isOpen,title:m.title,description:m.description,onClose:g})}),e.jsx(U,{children:v&&e.jsx(ft,{isOpen:v,columns:u,columnLabels:w,onSave:S,onClose:()=>k(!1)})})]})},yt=({t:s})=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-10 text-slate-500",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500/20 to-orange-500/10 rounded-xl flex items-center justify-center mb-2 border border-amber-500/20",children:e.jsx(ee,{size:20,className:"text-amber-400"})}),e.jsx("p",{className:"text-xs font-medium",children:s.none}),e.jsx("p",{className:"text-[10px]",children:s.clickNew})]}),Nt={en:{title:"Assignments",allSubjects:"All Subjects",allStatus:"All Status",pending:"Pending",completed:"Completed",new:"New",taskName:"Task Name",description:"Description",subject:"Subject",type:"Type",dueDate:"Due Date",status:"Status",time:"Time",duration:"Duration",priority:"Priority",actions:"Actions",addNew:"Add new row...",none:"No assignments yet",clickNew:'Click "New" to add one',deleteTitle:"Delete Assignment",deleteMsg:"Are you sure? This cannot be undone.",delete:"Delete",cancel:"Cancel",overdue:"OVERDUE",today:"TODAY",soon:"SOON",save:"Save",addTask:"Add Task",editTask:"Edit Task",startTime:"Start Time",endTime:"End Time",enterDesc:"Enter description..."},bn:{title:"অ্যাসাইনমেন্ট",allSubjects:"সব বিষয়",allStatus:"সব স্ট্যাটাস",pending:"বাকি আছে",completed:"সম্পন্ন",new:"নতুন",taskName:"টাস্কের নাম",description:"বিবরণ",subject:"বিষয়",type:"ধরন",dueDate:"তারিখ",status:"স্ট্যাটাস",time:"সময়",duration:"সময়কাল",priority:"গুরুত্ব",actions:"অ্যাকশন",addNew:"নতুন টাস্ক যোগ করুন...",none:"কোনো অ্যাসাইনমেন্ট নেই",clickNew:'"নতুন" ক্লিক করুন',deleteTitle:"মুছে ফেলুন",deleteMsg:"আপনি কি নিশ্চিত?",delete:"মুছুন",cancel:"বাতিল",overdue:"মেয়াদ শেষ",today:"আজ",soon:"শীঘ্রই",save:"সংরক্ষণ",addTask:"নতুন টাস্ক",editTask:"সম্পাদনা",startTime:"শুরুর সময়",endTime:"শেষের সময়",enterDesc:"বিবরণ লিখুন..."}},pe=()=>({title:"",description:"",subject:"",date:"",type:"",priority:"",status:"",startTime:"",endTime:""}),Pt=()=>{const{currentUser:s}=Ce(),[t,a]=p.useState([]),[i,n]=p.useState(!1),[r,d]=p.useState(null),[m,o]=p.useState("All"),[u,x]=p.useState("All"),[v,k]=p.useState(Me),[w,N]=p.useState(!0),[g,S]=p.useState(null),[l,f]=p.useState(pe()),b=async()=>{if(s){try{const[c,y]=await Promise.all([De(s.uid),Te(s.uid)]);a(c),k(y),f(D=>({...D,type:y.types[0]||"",priority:y.priorities[1]||"",status:y.statuses[0]||""}))}catch(c){console.error("Error loading data:",c)}N(!1)}};p.useEffect(()=>{b()},[s]);const j=v.language||"bn",C=Nt[j],T=async c=>{if(c.preventDefault(),!s)return;const y={userId:s.uid,title:l.title,description:l.description,subject:l.subject,dueDate:new Date(l.date).getTime(),priority:l.priority,status:l.status,type:l.type,startTime:l.startTime,endTime:l.endTime};try{r?await le(r,y):await $e(y),await b(),F()}catch(D){console.error("Error saving:",D)}},z=async c=>{const y=t.find(D=>D.id===c);a(D=>D.filter(E=>E.id!==c)),S(null);try{await ze(c)}catch(D){console.error("Error deleting:",D),y&&a(E=>[...E,y])}},P=async c=>{const y=v.statuses.indexOf(c.status),D=v.statuses[(y+1)%v.statuses.length];a(E=>E.map(R=>R.id===c.id?{...R,status:D}:R));try{await le(c.id,{status:D})}catch(E){console.error("Error toggling status:",E),a(R=>R.map(q=>q.id===c.id?{...q,status:c.status}:q))}},$=c=>{f({title:c.title,description:c.description||"",subject:c.subject,date:I(new Date(c.dueDate),"yyyy-MM-dd"),priority:c.priority,status:c.status,type:c.type||"",startTime:c.startTime||"",endTime:c.endTime||""}),d(c.id),n(!0)},F=()=>{f(pe()),d(null),n(!1)},K=t.filter(c=>{const y=m==="All"||c.subject===m,D=u==="All"||(u==="Pending"?c.status!==v.statuses[v.statuses.length-1]:c.status===u);return y&&D}).sort((c,y)=>!c.startTime&&!y.startTime?0:c.startTime?y.startTime?c.startTime.localeCompare(y.startTime):-1:1);return w?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):e.jsxs("div",{className:"h-full flex flex-col space-y-4",children:[e.jsx(xt,{title:C.title,subjectFilter:m,statusFilter:u,subjects:[...new Set(t.map(c=>c.subject))],onSubjectChange:o,onStatusChange:x,onAddClick:()=>n(!0),t:C}),e.jsx(jt,{assignments:K,t:C,lang:j,onEdit:$,onDelete:S,onToggleStatus:P,onAddClick:()=>n(!0)}),e.jsx(mt,{isOpen:i,editingId:r,title:l.title,description:l.description,subject:l.subject,date:l.date,type:l.type,priority:l.priority,status:l.status,startTime:l.startTime,endTime:l.endTime,setTitle:c=>f(y=>({...y,title:c})),setDescription:c=>f(y=>({...y,description:c})),setSubject:c=>f(y=>({...y,subject:c})),setDate:c=>f(y=>({...y,date:c})),setType:c=>f(y=>({...y,type:c})),setPriority:c=>f(y=>({...y,priority:c})),setStatus:c=>f(y=>({...y,status:c})),setStartTime:c=>f(y=>({...y,startTime:c})),setEndTime:c=>f(y=>({...y,endTime:c})),onSubmit:T,onClose:F,subjects:v.subjects,types:v.types,statuses:v.statuses,priorities:v.priorities,lang:j}),e.jsx(Ue,{isOpen:!!g,title:C.deleteTitle,message:C.deleteMsg,confirmText:C.delete,cancelText:C.cancel,onConfirm:()=>g&&z(g),onCancel:()=>S(null)})]})};export{Nt as T,bt as calcDuration,pe as createInitialFormState,Pt as default,be as getPriorityStyle,pt as getStatusStyle,Ne as getTimeStatus,Ot as getTypeColor,ve as getTypeStyle,At as getUrgencyBadge};
