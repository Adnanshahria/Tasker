import{r as b,j as e,C as A,H as U,a as Ce}from"./index-Cne2Ep7V.js";import{D as De,e as Me,g as Te,f as le,h as $e,i as ze}from"./dataService-DjKBfawx.js";import{s as Ae,e as Oe,C as Pe,P as ie,G as Ee}from"./startOfMonth-B4NEmk6m.js";import{c as B}from"./createLucideIcon-7o-9_THE.js";import{t as Z,c as Y,n as _e,m as Re,a as Fe,i as he,e as He,f as I,C as Le}from"./format-C_y4vW7T.js";import{X as W}from"./x-DWWUPWxA.js";import{C as X}from"./check-BfSB-3UY.js";import{C as Ie}from"./calendar-CU12HbNN.js";import{T as Be,F as qe,C as Ue}from"./ConfirmModal-ITi-Bl4t.js";import{P as Ve}from"./pen-j5rPDugZ.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Qe=B("chevron-left",Ge);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Je=B("chevron-right",Ye);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ee=B("circle-check-big",We);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],J=B("clock",Xe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],ge=B("settings-2",Ke);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],et=B("timer",Ze);function fe(s,t,n){const o=Z(s,n==null?void 0:n.in);if(isNaN(t))return Y(s,NaN);if(!t)return o;const i=o.getDate(),a=Y(s,o.getTime());a.setMonth(o.getMonth()+t+1,0);const d=a.getDate();return i>=d?a:(o.setFullYear(a.getFullYear(),a.getMonth(),i),o)}function tt(s){return Y(s,Date.now())}function je(s){return t=>{const o=(s?Math[s]:Math.trunc)(t);return o===0?0:o}}function st(s,t,n){const[o,i]=_e(n==null?void 0:n.in,s,t),a=(+o-+i)/Re;return je(n==null?void 0:n.roundingMethod)(a)}function rt(s,t){return+Z(s)-+Z(t)}function oe(s,t,n){const o=rt(s,t)/Fe;return je(n==null?void 0:n.roundingMethod)(o)}function ye(s,t){return he(Y(s,s),tt(s))}function at(s,t,n){return fe(s,-1,n)}const nt=({isOpen:s,value:t,onChange:n,onClose:o})=>{const[i,a]=b.useState(t?new Date(t):new Date),d=t?new Date(t):null;if(b.useEffect(()=>{t&&a(new Date(t))},[t]),!s)return null;const u=Ae(i),g=Oe(i),p=He({start:u,end:g}),l=u.getDay(),m=Array(l).fill(null),k=["Su","Mo","Tu","We","Th","Fr","Sa"],N=h=>{n(I(h,"yyyy-MM-dd")),o()},j=()=>{n(I(new Date,"yyyy-MM-dd")),o()};return e.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:o,children:e.jsxs(A.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-gradient-to-br from-slate-800 via-slate-850 to-slate-900 border border-indigo-500/30 rounded-2xl p-4 w-full max-w-xs shadow-2xl shadow-indigo-500/20",onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:()=>a(at(i)),className:"p-2 bg-slate-700/50 hover:bg-indigo-500/30 rounded-lg text-slate-300 hover:text-white transition-colors",children:e.jsx(Qe,{size:18})}),e.jsx("h3",{className:"text-lg font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:I(i,"MMMM yyyy")}),e.jsx("button",{onClick:()=>a(fe(i,1)),className:"p-2 bg-slate-700/50 hover:bg-indigo-500/30 rounded-lg text-slate-300 hover:text-white transition-colors",children:e.jsx(Je,{size:18})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:k.map(h=>e.jsx("div",{className:"text-center text-xs font-medium text-slate-400 py-1",children:h},h))}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[m.map((h,S)=>e.jsx("div",{className:"h-9"},`pad-${S}`)),p.map(h=>{const S=d&&he(h,d),r=ye(h);return e.jsx("button",{onClick:()=>N(h),className:`h-9 w-full rounded-lg text-sm font-medium transition-all ${S?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-lg shadow-indigo-500/30":r?"bg-amber-500/20 text-amber-400 border border-amber-500/30 hover:bg-amber-500/30":"text-slate-300 hover:bg-slate-700/50 hover:text-white"}`,children:I(h,"d")},h.toISOString())})]}),e.jsxs("div",{className:"flex gap-2 mt-4 pt-3 border-t border-slate-700/50",children:[e.jsx("button",{onClick:()=>{n(""),o()},className:"flex-1 py-2 rounded-lg bg-slate-700/50 text-slate-300 hover:bg-slate-600/50 text-sm font-medium transition-colors",children:"Clear"}),e.jsx("button",{onClick:j,className:"flex-1 py-2 rounded-lg bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-sm font-medium hover:from-indigo-500 hover:to-purple-500 transition-colors shadow-lg shadow-indigo-500/25",children:"Today"})]})]})})},ce=({isOpen:s,value:t,onChange:n,onClose:o,label:i="Select Time"})=>{const[a,d]=b.useState(12),[u,g]=b.useState(0),[p,l]=b.useState(!1),m=b.useRef(null),k=b.useRef(null);if(b.useEffect(()=>{if(t){const[r,f]=t.split(":").map(Number);d(r%12||12),g(f),l(r>=12)}},[t]),b.useEffect(()=>{s&&setTimeout(()=>{var r,f,x,v;(f=(r=m.current)==null?void 0:r.querySelector(`[data-hour="${a}"]`))==null||f.scrollIntoView({block:"center",behavior:"smooth"}),(v=(x=k.current)==null?void 0:x.querySelector(`[data-min="${u}"]`))==null||v.scrollIntoView({block:"center",behavior:"smooth"})},100)},[s,a,u]),!s)return null;const N=()=>{let r=a;p&&a!==12&&(r=a+12),!p&&a===12&&(r=0),n(`${r.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`),o()},j=()=>{n(""),o()},h=Array.from({length:12},(r,f)=>f+1),S=Array.from({length:60},(r,f)=>f);return e.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:o,children:e.jsxs(A.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.2},className:"bg-gradient-to-br from-slate-800 to-slate-900 border border-indigo-500/30 rounded-2xl p-4 w-full max-w-sm shadow-2xl",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{size:18,className:"text-indigo-400"}),e.jsx("span",{className:"font-medium text-white",children:i})]}),e.jsx("button",{onClick:o,className:"p-1.5 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg text-slate-400 hover:text-white transition-colors",children:e.jsx(W,{size:16})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-4",children:[e.jsx("input",{type:"number",min:"1",max:"12",value:a,onChange:r=>{const f=parseInt(r.target.value)||1;d(Math.min(12,Math.max(1,f)))},className:"w-16 text-4xl font-bold text-white bg-slate-700/50 border border-slate-600 rounded-lg text-center py-1 focus:border-indigo-500 focus:outline-none"}),e.jsx("span",{className:"text-4xl font-bold text-slate-500",children:":"}),e.jsx("input",{type:"number",min:"0",max:"59",value:u.toString().padStart(2,"0"),onChange:r=>{const f=parseInt(r.target.value)||0;g(Math.min(59,Math.max(0,f)))},className:"w-16 text-4xl font-bold text-white bg-slate-700/50 border border-slate-600 rounded-lg text-center py-1 focus:border-indigo-500 focus:outline-none"}),e.jsx("button",{onClick:()=>l(!p),className:"ml-2 px-3 py-2 rounded-lg bg-indigo-500/20 hover:bg-indigo-500/30 text-indigo-400 text-xl font-bold transition-colors",children:p?"PM":"AM"})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-slate-400 text-center mb-1 uppercase font-medium",children:"Hour"}),e.jsx("div",{ref:m,className:"h-40 overflow-y-auto bg-slate-900/50 rounded-xl border border-slate-700/50 scrollbar-hide",children:h.map(r=>e.jsx("button",{"data-hour":r,onClick:()=>d(r),className:`w-full py-3 text-center text-lg font-medium transition-all ${a===r?"bg-indigo-500 text-white":"text-slate-300 hover:bg-slate-700/50"}`,children:r.toString().padStart(2,"0")},r))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-slate-400 text-center mb-1 uppercase font-medium",children:"Min"}),e.jsx("div",{ref:k,className:"h-40 overflow-y-auto bg-slate-900/50 rounded-xl border border-slate-700/50 scrollbar-hide",children:S.map(r=>e.jsx("button",{"data-min":r,onClick:()=>g(r),className:`w-full py-3 text-center text-lg font-medium transition-all ${u===r?"bg-indigo-500 text-white":"text-slate-300 hover:bg-slate-700/50"}`,children:r.toString().padStart(2,"0")},r))})]}),e.jsxs("div",{className:"w-20",children:[e.jsx("div",{className:"text-xs text-slate-400 text-center mb-1 uppercase font-medium",children:"Period"}),e.jsxs("div",{className:"h-40 flex flex-col gap-2 justify-center",children:[e.jsx("button",{onClick:()=>l(!1),className:`flex-1 rounded-xl text-lg font-bold transition-all ${p?"bg-slate-700/50 text-slate-400 hover:bg-slate-600/50":"bg-indigo-500 text-white"}`,children:"AM"}),e.jsx("button",{onClick:()=>l(!0),className:`flex-1 rounded-xl text-lg font-bold transition-all ${p?"bg-indigo-500 text-white":"bg-slate-700/50 text-slate-400 hover:bg-slate-600/50"}`,children:"PM"})]})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[{h:9,m:0,pm:!1},{h:12,m:0,pm:!0},{h:6,m:0,pm:!0},{h:9,m:0,pm:!0}].map(({h:r,m:f,pm:x})=>e.jsxs("button",{onClick:()=>{d(r),g(f),l(x)},className:"py-2 rounded-lg bg-slate-700/50 hover:bg-indigo-500/30 text-slate-300 hover:text-white text-sm font-medium transition-colors",children:[r,x?"PM":"AM"]},`${r}-${x}`))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:j,className:"flex-1 py-2.5 rounded-xl bg-slate-700/50 text-slate-300 hover:bg-slate-600/50 font-medium transition-colors",children:"Clear"}),e.jsxs("button",{onClick:N,className:"flex-1 py-2.5 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-medium flex items-center justify-center gap-2 shadow-lg shadow-indigo-500/25",children:[e.jsx(X,{size:16}),"Done"]})]})]})})},lt=({isOpen:s,value:t,onChange:n,onClose:o,label:i="Duration"})=>{const[a,d]=b.useState(0),[u,g]=b.useState(0);if(b.useEffect(()=>{t>0?(d(Math.floor(t/60)),g(t%60)):(d(0),g(0))},[t]),!s)return null;const p=()=>{const N=a*60+u;n(N),o()},l=()=>{n(0),o()},m=[{label:"30m",value:30},{label:"1h",value:60},{label:"1h 30m",value:90},{label:"2h",value:120},{label:"3h",value:180},{label:"4h",value:240}],k=N=>{const j=Math.floor(N/60),h=N%60;d(j),g(h)};return e.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:o,children:e.jsxs(A.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-gradient-to-br from-slate-800 via-slate-850 to-slate-900 border border-indigo-500/30 rounded-3xl p-5 w-full max-w-xs shadow-2xl shadow-indigo-500/20",onClick:N=>N.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{size:18,className:"text-indigo-400"}),e.jsx("span",{className:"text-sm font-medium text-slate-400",children:i})]}),e.jsx("button",{onClick:o,className:"p-1.5 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg text-slate-400 hover:text-white transition-colors",children:e.jsx(W,{size:16})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-5",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:a.toString().padStart(2,"0")}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Hours"})]}),e.jsx("span",{className:"text-4xl font-bold text-slate-500",children:":"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:u.toString().padStart(2,"0")}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Minutes"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Hours"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>d(Math.max(0,a-1)),className:"px-3 py-2 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg text-slate-300",children:"-"}),e.jsx("input",{type:"number",min:"0",max:"23",value:a,onChange:N=>d(Math.min(23,Math.max(0,parseInt(N.target.value)||0))),className:"w-12 text-center bg-slate-900 border border-slate-600 rounded-lg py-2 text-white text-sm focus:border-indigo-500 outline-none"}),e.jsx("button",{onClick:()=>d(Math.min(23,a+1)),className:"px-3 py-2 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg text-slate-300",children:"+"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Minutes"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>g(Math.max(0,u-5)),className:"px-3 py-2 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg text-slate-300",children:"-"}),e.jsx("input",{type:"number",min:"0",max:"55",step:"5",value:u,onChange:N=>g(Math.min(55,Math.max(0,parseInt(N.target.value)||0))),className:"w-12 text-center bg-slate-900 border border-slate-600 rounded-lg py-2 text-white text-sm focus:border-indigo-500 outline-none"}),e.jsx("button",{onClick:()=>g(Math.min(55,u+5)),className:"px-3 py-2 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg text-slate-300",children:"+"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-2",children:"Quick Select"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:m.map(({label:N,value:j})=>{const h=a*60+u===j;return e.jsx("button",{onClick:()=>k(j),className:`py-2 px-3 rounded-lg text-xs font-medium transition-all ${h?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white":"bg-slate-700/50 text-slate-300 hover:bg-slate-600/50"}`,children:N},j)})})]}),e.jsxs("div",{className:"flex gap-2 pt-3 border-t border-slate-700/50",children:[e.jsx("button",{onClick:l,className:"flex-1 py-2 rounded-lg bg-slate-700/50 text-slate-300 hover:bg-slate-600/50 text-sm font-medium transition-colors",children:"Clear"}),e.jsxs("button",{onClick:p,className:"flex-1 py-2 rounded-lg bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-sm font-medium hover:from-indigo-500 hover:to-purple-500 transition-colors shadow-lg shadow-indigo-500/25 flex items-center justify-center gap-2",children:[e.jsx(X,{size:14}),"Confirm"]})]})]})})},it=s=>{if(!s)return{hours:"--",minutes:"--",ampm:""};const t=s.split(":");if(t.length!==2)return{hours:"--",minutes:"--",ampm:""};const n=parseInt(t[0])||0,o=parseInt(t[1])||0,i=n>=12?"PM":"AM";return{hours:(n%12||12).toString().padStart(2,"0"),minutes:o.toString().padStart(2,"0"),ampm:i}},G=({digit:s})=>e.jsx("div",{className:"relative w-[0.55em] h-[1.1em] overflow-hidden inline-flex justify-center",children:e.jsx(U,{mode:"popLayout",initial:!1,children:e.jsx(A.span,{initial:{y:-15,opacity:0},animate:{y:0,opacity:1},exit:{y:15,opacity:0},transition:{duration:.1,ease:"easeOut"},className:"absolute",children:s},s)})}),de=({time:s,isAutoCalculated:t=!1,className:n=""})=>{const[o,i]=b.useState(s),a=b.useRef(s),d=b.useRef(null);b.useEffect(()=>{if(d.current&&(clearInterval(d.current),d.current=null),s!==a.current&&t&&s&&a.current){const[l,m]=a.current.split(":").map(Number),[k,N]=s.split(":").map(Number),j=l*60+m,S=k*60+N-j,r=Math.min(Math.abs(S),12),f=80;let x=0;r>0?d.current=setInterval(()=>{x++;const v=x/r,C=1-Math.pow(1-v,2);let T=Math.round(j+S*C);T<0&&(T+=1440),T>=1440&&(T-=1440);const z=Math.floor(T/60),P=T%60;i(`${z.toString().padStart(2,"0")}:${P.toString().padStart(2,"0")}`),x>=r&&(clearInterval(d.current),i(s))},f):i(s)}else i(s);return a.current=s,()=>{d.current&&clearInterval(d.current)}},[s,t]);const{hours:u,minutes:g,ampm:p}=it(o);return e.jsxs("span",{className:`inline-flex items-center font-mono text-sm ${n}`,children:[e.jsx(G,{digit:u[0]}),e.jsx(G,{digit:u[1]}),e.jsx("span",{className:"mx-0.5",children:":"}),e.jsx(G,{digit:g[0]}),e.jsx(G,{digit:g[1]}),p&&e.jsx("span",{className:"ml-1 text-xs text-slate-400",children:p})]})},ot={en:{title:"Title",description:"Description",subject:"Subject",dueDate:"Due",type:"Type",priority:"Priority",status:"Status",startTime:"Start",endTime:"End",duration:"Duration",cancel:"Cancel",save:"Save",editTitle:"Edit Task",newTitle:"New Task",placeholder:"Task name",descPlaceholder:"Description (optional)",select:"Select...",selectDate:"Select date",selectTime:"Select time"},bn:{title:"শিরোনাম",description:"বিবরণ",subject:"বিষয়",dueDate:"তারিখ",type:"ধরন",priority:"গুরুত্ব",status:"স্ট্যাটাস",startTime:"শুরু",endTime:"শেষ",duration:"সময়কাল",cancel:"বাতিল",save:"সংরক্ষণ",editTitle:"সম্পাদনা",newTitle:"নতুন টাস্ক",placeholder:"টাস্কের নাম",descPlaceholder:"বিবরণ (ঐচ্ছিক)",select:"নির্বাচন...",selectDate:"তারিখ নির্বাচন",selectTime:"সময় নির্বাচন"}},ct=(s,t)=>{if(!s||!t)return 0;const[n,o]=s.split(":").map(Number),[i,a]=t.split(":").map(Number);let d=i*60+a-(n*60+o);return d<0&&(d+=1440),d},dt=s=>{if(s<=0)return"--";const t=Math.floor(s/60),n=s%60;return t===0?`${n}m`:n===0?`${t}h`:`${t}h ${n}m`},ue=(s,t)=>{if(!s||t<=0)return"";const[n,o]=s.split(":").map(Number);let i=n*60+o+t;i=i%1440;const a=Math.floor(i/60),d=i%60;return`${a.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`},me=(s,t)=>{if(!s||t<=0)return"";const[n,o]=s.split(":").map(Number);let i=n*60+o-t;i<0&&(i+=1440);const a=Math.floor(i/60),d=i%60;return`${a.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`},ut=s=>s?new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",mt=({isOpen:s,editingId:t,title:n,description:o,subject:i,date:a,type:d,priority:u,status:g,startTime:p,endTime:l,setTitle:m,setDescription:k,setSubject:N,setDate:j,setType:h,setPriority:S,setStatus:r,setStartTime:f,setEndTime:x,onSubmit:v,onClose:C,subjects:T,types:z,statuses:P,priorities:$,lang:F="bn"})=>{const[K,c]=b.useState(!1),[w,M]=b.useState(!1),[E,R]=b.useState(!1),[q,te]=b.useState(!1),[_,se]=b.useState(0),[re,H]=b.useState(null),ae=b.useRef(p),ne=b.useRef(l);if(b.useEffect(()=>{p&&l&&se(ct(p,l))},[p,l]),!s)return null;const D=ot[F],L="w-full bg-slate-900 border border-slate-600 rounded-lg p-2.5 text-white text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none transition-all",O="block text-xs uppercase font-bold text-slate-400 mb-1",V="w-full bg-slate-900 border border-slate-600 rounded-lg p-2.5 text-sm cursor-pointer hover:border-indigo-500/50 transition-all flex items-center justify-between gap-2 min-h-[42px]",we=y=>{ae.current=p,f(y),H(null),_>0&&!l&&(H("end"),x(ue(y,_)))},ke=y=>{ne.current=l,x(y),H(null),_>0&&!p&&(H("start"),f(me(y,_)))},Se=y=>{se(y),!(y<=0)&&(p?(ne.current=l,H("end"),x(ue(p,y))):l&&(ae.current=p,H("start"),f(me(l,y))))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",onClick:C,children:e.jsxs(A.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"bg-gradient-to-br from-slate-800 to-slate-900 border border-indigo-500/30 rounded-2xl p-6 w-full max-w-lg shadow-2xl overflow-y-auto max-h-[90vh]",onClick:y=>y.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent mb-4",children:t?D.editTitle:D.newTitle}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:O,children:D.title}),e.jsx("input",{required:!0,value:n,onChange:y=>m(y.target.value),className:L,placeholder:D.placeholder})]}),e.jsxs("div",{children:[e.jsx("label",{className:O,children:D.description}),e.jsx("textarea",{value:o,onChange:y=>k(y.target.value),rows:2,className:L+" resize-none",placeholder:D.descPlaceholder})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:O,children:D.subject}),e.jsxs("select",{required:!0,value:i,onChange:y=>N(y.target.value),className:L,children:[e.jsx("option",{value:"",children:D.select}),T.map(y=>e.jsx("option",{value:y,children:y},y))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:O,children:D.dueDate}),e.jsxs("button",{type:"button",onClick:()=>c(!0),className:V,children:[e.jsx("span",{className:a?"text-white":"text-slate-500",children:a?ut(a):D.selectDate}),e.jsx(Ie,{size:16,className:"text-indigo-400"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:O,children:D.startTime}),e.jsxs("button",{type:"button",onClick:()=>M(!0),className:V,children:[p?e.jsx(de,{time:p,isAutoCalculated:re==="start",className:"text-white"}):e.jsx("span",{className:"text-slate-500",children:"--:--"}),e.jsx(J,{size:14,className:"text-indigo-400 flex-shrink-0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:O,children:D.endTime}),e.jsxs("button",{type:"button",onClick:()=>R(!0),className:V,children:[l?e.jsx(de,{time:l,isAutoCalculated:re==="end",className:"text-white"}):e.jsx("span",{className:"text-slate-500",children:"--:--"}),e.jsx(J,{size:14,className:"text-indigo-400 flex-shrink-0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:O,children:D.duration}),e.jsxs("button",{type:"button",onClick:()=>te(!0),className:V+" relative overflow-hidden",children:[e.jsx(A.span,{initial:{scale:.5,opacity:0,y:-10},animate:{scale:[1,1.15,1],opacity:1,y:0,color:_>0?["#818cf8","#c084fc","#818cf8"]:"#64748b"},transition:{duration:.6,scale:{duration:.4},color:{duration:.8,repeat:0}},className:"font-mono font-bold",children:dt(_)},_),e.jsx(et,{size:14,className:"text-indigo-400 flex-shrink-0"}),e.jsx(A.div,{initial:{opacity:.8,scale:.8},animate:{opacity:0,scale:1.5},transition:{duration:.5},className:"absolute inset-0 bg-indigo-500/20 rounded-lg pointer-events-none"},`glow-${_}`)]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:O,children:D.type}),e.jsx("select",{value:d,onChange:y=>h(y.target.value),className:L,children:z.map(y=>e.jsx("option",{value:y,children:y},y))})]}),e.jsxs("div",{children:[e.jsx("label",{className:O,children:D.priority}),e.jsx("select",{value:u,onChange:y=>S(y.target.value),className:L,children:$.map(y=>e.jsx("option",{value:y,children:y},y))})]}),e.jsxs("div",{children:[e.jsx("label",{className:O,children:D.status}),e.jsx("select",{value:g,onChange:y=>r(y.target.value),className:L,children:P.map(y=>e.jsx("option",{value:y,children:y},y))})]})]}),e.jsxs("div",{className:"flex gap-3 mt-4 pt-4 border-t border-slate-700",children:[e.jsx("button",{type:"button",onClick:C,className:"flex-1 py-2.5 rounded-xl bg-slate-700 text-slate-300 hover:bg-slate-600 font-medium",children:D.cancel}),e.jsx("button",{type:"submit",className:"flex-1 py-2.5 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white hover:from-indigo-500 hover:to-purple-500 font-medium shadow-lg shadow-indigo-500/25",children:D.save})]})]})]})}),e.jsx(nt,{isOpen:K,value:a,onChange:j,onClose:()=>c(!1)}),e.jsx(ce,{isOpen:w,value:p,onChange:we,onClose:()=>M(!1),label:F==="en"?"Start Time":"শুরুর সময়"}),e.jsx(ce,{isOpen:E,value:l,onChange:ke,onClose:()=>R(!1),label:F==="en"?"End Time":"শেষ সময়"}),e.jsx(lt,{isOpen:q,value:_,onChange:Se,onClose:()=>te(!1),label:F==="en"?"Duration":"সময়কাল"})]})},xe=({value:s,options:t,onChange:n,placeholder:o="Select...",className:i=""})=>{const[a,d]=b.useState(!1),u=b.useRef(null),g=t.find(l=>l.value===s);b.useEffect(()=>{const l=m=>{u.current&&!u.current.contains(m.target)&&d(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]);const p=l=>{n(l),d(!1)};return e.jsxs("div",{ref:u,className:`relative ${i}`,children:[e.jsxs("button",{type:"button",onClick:()=>d(!a),className:`
                    flex items-center justify-between gap-2 
                    bg-slate-800/80 hover:bg-slate-700/80 
                    border border-slate-600/50 hover:border-indigo-500/50
                    rounded-xl px-3 py-2 
                    text-sm text-white 
                    cursor-pointer transition-all
                    min-w-[100px] md:min-w-[120px]
                    ${a?"border-indigo-500/50 ring-1 ring-indigo-500/30":""}
                `,children:[e.jsx("span",{className:g?"text-white":"text-slate-400",children:(g==null?void 0:g.label)||o}),e.jsx(Pe,{size:14,className:`text-slate-400 transition-transform duration-200 ${a?"rotate-180":""}`})]}),e.jsx(U,{children:a&&e.jsx(A.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},className:`absolute z-50 top-full left-0 mt-1 w-full min-w-[140px] \r
                                   bg-gradient-to-br from-slate-800 to-slate-900 \r
                                   border border-indigo-500/30 rounded-xl \r
                                   shadow-xl shadow-black/30 overflow-hidden`,children:e.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar py-1",children:t.map((l,m)=>{const k=l.value===s;return e.jsxs("button",{type:"button",onClick:()=>p(l.value),className:`
                                            w-full flex items-center justify-between gap-2 
                                            px-3 py-2 text-sm text-left
                                            transition-colors
                                            ${k?"bg-indigo-500/20 text-indigo-300":"text-slate-300 hover:bg-slate-700/50 hover:text-white"}
                                        `,children:[e.jsx("span",{children:l.label}),k&&e.jsx(X,{size:14,className:"text-indigo-400"})]},l.value)})})})})]})},xt=({title:s,subjectFilter:t,statusFilter:n,subjects:o,onSubjectChange:i,onStatusChange:a,onAddClick:d,t:u})=>{const g=[{value:"All",label:u.allSubjects},...o.map(l=>({value:l,label:l}))],p=[{value:"All",label:u.allStatus},{value:"Pending",label:u.pending},{value:"Completed",label:u.completed}];return e.jsxs("div",{className:"bg-gradient-to-r from-amber-600/20 to-orange-600/10 border border-amber-500/20 p-2 md:p-3 rounded-2xl flex flex-wrap items-center justify-between gap-2 md:gap-4 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-4 flex-wrap",children:[e.jsxs("h2",{className:"text-sm md:text-lg font-bold text-white px-2 md:px-3 border-r border-white/10 flex items-center gap-2",children:[e.jsxs("span",{className:"w-6 h-6 md:w-8 md:h-8 bg-amber-500 rounded-lg flex items-center justify-center shadow-lg shadow-amber-500/30",children:[e.jsx(ee,{size:14,className:"md:hidden"}),e.jsx(ee,{size:18,className:"hidden md:block"})]}),e.jsx("span",{className:"hidden sm:inline",children:s})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{value:t,options:g,onChange:i,placeholder:u.allSubjects}),e.jsx(xe,{value:n,options:p,onChange:a,placeholder:u.allStatus})]})]}),e.jsxs("button",{onClick:d,className:"flex items-center gap-1 md:gap-2 bg-amber-500 hover:bg-amber-400 text-white px-3 md:px-4 py-1.5 md:py-2 rounded-xl text-xs md:text-sm font-bold shadow-lg shadow-amber-500/30 hover:scale-105 transition-all shrink-0",children:[e.jsx(ie,{size:14,className:"md:hidden"}),e.jsx(ie,{size:16,className:"hidden md:block"}),e.jsx("span",{children:u.new})]})]})},bt=(s,t)=>{if(!s||!t)return"-";const[n,o]=s.split(":").map(Number),[i,a]=t.split(":").map(Number);let d=i*60+a-(n*60+o);d<0&&(d+=1440);const u=Math.floor(d/60),g=d%60;return u===0?`${g}m`:g===0?`${u}h`:`${u}h ${g}m`},Ne=(s,t)=>{const n=new Date,o=new Date(s.dueDate);if(s.startTime&&ye(o)){const[l,m]=s.startTime.split(":").map(Number),k=new Date;k.setHours(l,m,0,0);const N=oe(k,n);if(N>0){const j=Math.floor(N/60),h=N%60;if(j===0){const S=`${h}m`,r=t==="en"?"to start":"শুরু";return{label:`${S} ${r}`,time:S,status:r,color:"bg-sky-500/90 text-white",type:"to_start"}}else{const S=`${j}h ${h}m`,r=t==="en"?"to start":"শুরু";return{label:`${S} ${r}`,time:S,status:r,color:"bg-sky-500/80 text-white",type:"to_start"}}}}if(s.endTime){const[l,m]=s.endTime.split(":").map(Number);o.setHours(l,m,0,0)}else if(s.startTime){const[l,m]=s.startTime.split(":").map(Number);o.setHours(l,m,0,0)}else o.setHours(23,59,59,0);const i=oe(o,n),a=st(o,n);if(i<0){const l=Math.abs(a);if(l<1){const m=`${Math.abs(i)}m`,k=t==="en"?"ago":"আগে";return{label:`${m} ${k}`,time:m,status:k,color:"bg-red-500/90 text-white",type:"overdue"}}else if(l<24){const m=`${l}h`,k=t==="en"?"ago":"আগে";return{label:`${m} ${k}`,time:m,status:k,color:"bg-red-500/90 text-white",type:"overdue"}}else{const k=`${Math.floor(l/24)}d`,N=t==="en"?"ago":"আগে";return{label:`${k} ${N}`,time:k,status:N,color:"bg-red-600/90 text-white",type:"overdue"}}}if(i<=60){const l=`${i}m`,m=t==="en"?"left":"বাকি";return{label:`${l} ${m}`,time:l,status:m,color:"bg-rose-500 text-white animate-pulse",type:"left"}}if(i<=1440){const l=Math.floor(i/60),m=i%60,k=m>0?`${l}h ${m}m`:`${l}h`,N=t==="en"?"left":"বাকি";return{label:`${k} ${N}`,time:k,status:N,color:l<=3?"bg-amber-500 text-white":"bg-yellow-500/90 text-white",type:"left"}}const d=Math.ceil(i/1440),u=`${d}d`,g=t==="en"?"left":"বাকি";return{label:`${u} ${g}`,time:u,status:g,color:d<=3?"bg-orange-500/80 text-white":"bg-slate-600 text-slate-200",type:"upcoming"}},At=(s,t)=>Ne(s,t),be=s=>{const t=(s==null?void 0:s.toLowerCase())||"";return t.includes("urgent")||t.includes("জরুরি")||t.includes("high")?{text:"text-red-300",pillBg:"bg-red-500/25",border:"border-l-red-500",rowBg:"border-l-2 border-l-red-500",glow:"0 0 8px rgba(239, 68, 68, 0.4)"}:t.includes("medium")||t.includes("মাঝারি")?{text:"text-amber-300",pillBg:"bg-amber-500/25",border:"border-l-amber-500",rowBg:"border-l-2 border-l-amber-400",glow:"0 0 8px rgba(245, 158, 11, 0.3)"}:{text:"text-emerald-300",pillBg:"bg-emerald-500/20",border:"border-l-emerald-600",rowBg:"border-l-2 border-l-emerald-600",glow:"0 0 6px rgba(16, 185, 129, 0.2)"}},pt=s=>{const t=(s==null?void 0:s.toLowerCase())||"";return t.includes("complete")||t.includes("সম্পন্ন")||t.includes("done")?"bg-emerald-500/30 text-emerald-300 border-emerald-400/50 shadow-emerald-500/20":t.includes("progress")||t.includes("চলছে")||t.includes("ongoing")?"bg-amber-500/30 text-amber-300 border-amber-400/50 shadow-amber-500/20":"bg-slate-500/30 text-slate-300 border-slate-400/50"},ve=s=>{const t=(s==null?void 0:s.toLowerCase())||"";return t.includes("exam")||t.includes("পরীক্ষা")?{bg:"bg-rose-500/25",text:"text-rose-300",border:"border-rose-500/40"}:t.includes("quiz")||t.includes("কুইজ")?{bg:"bg-amber-500/25",text:"text-amber-300",border:"border-amber-500/40"}:t.includes("project")||t.includes("প্রজেক্ট")?{bg:"bg-indigo-500/25",text:"text-indigo-300",border:"border-indigo-500/40"}:t.includes("assignment")||t.includes("অ্যাসাইনমেন্ট")?{bg:"bg-blue-500/25",text:"text-blue-300",border:"border-blue-500/40"}:t.includes("lab")||t.includes("ল্যাব")?{bg:"bg-cyan-500/25",text:"text-cyan-300",border:"border-cyan-500/40"}:t.includes("presentation")||t.includes("প্রেজেন্টেশন")?{bg:"bg-purple-500/25",text:"text-purple-300",border:"border-purple-500/40"}:{bg:"bg-slate-500/20",text:"text-slate-300",border:"border-slate-500/30"}},Ot=s=>ve(s).text,ht=["taskName","subject","duration","time","date","priority","status","actions"],Q=["border-b-rose-500/30","border-b-orange-500/30","border-b-amber-500/30","border-b-yellow-500/30","border-b-lime-500/30","border-b-green-500/30","border-b-emerald-500/30","border-b-teal-500/30","border-b-cyan-500/30","border-b-sky-500/30","border-b-blue-500/30","border-b-indigo-500/30","border-b-violet-500/30","border-b-purple-500/30","border-b-fuchsia-500/30","border-b-pink-500/30"],gt=({isOpen:s,title:t,description:n,onClose:o})=>s?e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",onClick:o,children:e.jsxs(A.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-gradient-to-br from-slate-800 to-slate-900 border border-indigo-500/30 rounded-2xl p-5 w-full max-w-md shadow-2xl",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-500/20 rounded-lg flex items-center justify-center",children:e.jsx(qe,{size:16,className:"text-indigo-400"})}),e.jsx("h3",{className:"text-lg font-bold text-white",children:t})]}),e.jsx("button",{onClick:o,className:"p-1.5 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg text-slate-400 hover:text-white transition-colors",children:e.jsx(W,{size:16})})]}),e.jsx("div",{className:"bg-slate-900/50 border border-slate-700/50 rounded-xl p-4",children:e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed whitespace-pre-wrap",children:n||"No description available."})}),e.jsx("button",{onClick:o,className:"w-full mt-4 py-2.5 rounded-xl bg-indigo-600/80 hover:bg-indigo-500/80 text-white font-medium transition-colors",children:"Close"})]})}):null,ft=({isOpen:s,columns:t,columnLabels:n,onSave:o,onClose:i})=>{const[a,d]=b.useState(t),[u,g]=b.useState(null),[p,l]=b.useState(null);if(b.useEffect(()=>{d(t)},[t,s]),!s)return null;const m=(j,h)=>{g(h),j.dataTransfer.effectAllowed="move"},k=(j,h)=>{j.preventDefault(),h!==u&&l(h)},N=(j,h)=>{if(j.preventDefault(),u&&u!==h){const S=a.indexOf(u),r=a.indexOf(h),f=[...a];f.splice(S,1),f.splice(r,0,u),d(f)}g(null),l(null)};return e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",onClick:i,children:e.jsxs(A.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-gradient-to-br from-slate-800 to-slate-900 border border-amber-500/30 rounded-2xl p-5 w-full max-w-md shadow-2xl",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-500/20 rounded-lg flex items-center justify-center",children:e.jsx(ge,{size:16,className:"text-amber-400"})}),e.jsx("h3",{className:"text-lg font-bold text-white",children:"Reorder Columns"})]}),e.jsx("button",{onClick:i,className:"p-1.5 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg text-slate-400 hover:text-white transition-colors",children:e.jsx(W,{size:16})})]}),e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Drag columns to reorder them:"}),e.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:a.map((j,h)=>e.jsxs("div",{draggable:!0,onDragStart:S=>m(S,j),onDragOver:S=>k(S,j),onDrop:S=>N(S,j),onDragEnd:()=>{g(null),l(null)},className:`flex items-center gap-3 p-3 rounded-xl border transition-all cursor-grab active:cursor-grabbing
                                ${u===j?"opacity-50 bg-slate-700 border-amber-500/50":"bg-slate-800/50 border-slate-700/50 hover:border-amber-500/30"}
                                ${p===j?"border-t-2 border-t-amber-400":""}`,children:[e.jsx(Ee,{size:16,className:"text-slate-500"}),e.jsx("span",{className:"text-slate-200 font-medium flex-1",children:n[j]||j}),e.jsx("span",{className:"text-xs text-slate-500 bg-slate-700/50 px-2 py-0.5 rounded",children:h+1})]},j))}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsx("button",{onClick:i,className:"flex-1 py-2.5 rounded-xl bg-slate-700 text-slate-300 hover:bg-slate-600 font-medium transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:()=>{o(a),i()},className:"flex-1 py-2.5 rounded-xl bg-amber-600 hover:bg-amber-500 text-white font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(X,{size:16})," Save Order"]})]})]})})},jt=({assignments:s,t,lang:n,onEdit:o,onDelete:i,onToggleStatus:a,onAddClick:d})=>{const[u,g]=b.useState({isOpen:!1,title:"",description:""}),[p,l]=b.useState(()=>{const x=localStorage.getItem("assignment_column_order");return x?JSON.parse(x):ht}),[m,k]=b.useState(!1),N={taskName:t.taskName||"Task Name",subject:t.subject||"Subject",duration:"Duration",time:t.time||"Time",date:t.dueDate||"Date",priority:t.priority||"Priority",status:t.status||"Status",actions:t.actions||"Actions"},j=x=>{g({isOpen:!0,title:x.title,description:x.description||""})},h=()=>{g({isOpen:!1,title:"",description:""})},S=x=>{l(x),localStorage.setItem("assignment_column_order",JSON.stringify(x))},r=(x,v,C)=>{const T=Ne(v,n),z=be(v.priority);ve(v.type);const P=bt(v.startTime,v.endTime),$=Q[C%Q.length];switch(x){case"taskName":return e.jsx("td",{className:`py-1.5 px-1.5 md:px-2 border-b ${$} border-r border-r-purple-500/20 bg-slate-900/80 sticky left-6 z-10`,children:e.jsxs("div",{className:"flex items-center justify-between gap-1",children:[e.jsx("span",{className:"text-white font-medium truncate max-w-[80px] md:max-w-[120px]",children:v.title}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsxs("span",{className:`text-[7px] md:text-[8px] font-bold px-1.5 py-0.5 rounded-md flex flex-col items-center leading-tight ${T.color}`,children:[e.jsx("span",{children:T.time}),e.jsx("span",{className:"opacity-80 text-[6px] md:text-[7px]",children:T.status})]}),v.description&&e.jsx("button",{onClick:()=>j(v),className:"p-0.5 text-amber-400 hover:text-amber-300 transition-colors flex-shrink-0 bg-amber-500/10 rounded hover:bg-amber-500/20",title:"View description",children:e.jsx(Le,{size:12})})]})]})},x);case"subject":return e.jsx("td",{className:`py-1.5 px-1.5 md:px-2 border-b ${$} border-r border-r-blue-500/20`,children:e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-indigo-500/20 text-indigo-300 font-medium text-[9px] md:text-[10px] border border-indigo-500/30 whitespace-nowrap",children:v.subject})},x);case"duration":return e.jsx("td",{className:`py-1.5 px-1.5 md:px-2 border-b ${$} border-r border-r-lime-500/20 text-center`,children:e.jsx("span",{className:"text-lime-400 font-mono text-[9px] md:text-[10px] bg-lime-500/10 px-1.5 py-0.5 rounded",children:P})},x);case"time":return e.jsx("td",{className:`py-1.5 px-1.5 md:px-2 border-b ${$} border-r border-r-emerald-500/20`,children:e.jsx("span",{className:"text-purple-400 font-mono text-[9px] md:text-[10px] whitespace-nowrap",children:v.startTime&&v.endTime?e.jsxs("span",{className:"bg-purple-500/10 px-1.5 py-0.5 rounded",children:[v.startTime,"-",v.endTime]}):e.jsx("span",{className:"text-slate-600",children:"-"})})},x);case"date":return e.jsx("td",{className:`py-1.5 px-1.5 md:px-2 border-b ${$} border-r border-r-teal-500/20`,children:e.jsx("span",{className:"text-cyan-400 font-mono text-[9px] md:text-[10px] bg-cyan-500/10 px-1.5 py-0.5 rounded",children:I(new Date(v.dueDate),"dd MMM")})},x);case"priority":return e.jsx("td",{className:`py-1.5 px-1.5 md:px-2 border-b ${$} border-r border-r-amber-500/20`,children:e.jsx("span",{className:`px-2 py-0.5 rounded-full font-bold text-[9px] md:text-[10px] ${z.pillBg} ${z.text} shadow-sm`,style:{boxShadow:z.glow},children:v.priority||"-"})},x);case"status":return e.jsx("td",{className:`py-1.5 px-1.5 md:px-2 border-b ${$} border-r border-r-rose-500/20`,children:e.jsx("button",{onClick:()=>a(v),className:`px-2 py-0.5 text-[9px] md:text-[10px] font-bold rounded-full border transition-all hover:scale-105 active:scale-95 ${pt(v.status)}`,children:v.status})},x);case"actions":return e.jsx("td",{className:`py-1.5 px-1.5 md:px-2 text-center border-b ${$}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:[e.jsx("button",{onClick:()=>o(v),className:"p-1 bg-indigo-500/20 hover:bg-indigo-500/40 text-indigo-400 rounded-md transition-all hover:scale-110 active:scale-95",children:e.jsx(Ve,{size:10})}),e.jsx("button",{onClick:()=>i(v.id),className:"p-1 bg-rose-500/20 hover:bg-rose-500/40 text-rose-400 rounded-md transition-all hover:scale-110 active:scale-95",children:e.jsx(Be,{size:10})})]})},x);default:return null}},f=x=>{const v={taskName:"border-r-purple-500/30",subject:"border-r-blue-500/30",duration:"border-r-lime-500/30",time:"border-r-emerald-500/30",date:"border-r-teal-500/30",priority:"border-r-amber-500/30",status:"border-r-rose-500/30",actions:""},C={taskName:"min-w-[130px]",actions:"w-14"};return e.jsx("th",{className:`py-2 px-1.5 md:px-2 border-b-2 border-b-indigo-500/50 border-r ${v[x]||""} ${C[x]||""} ${x==="taskName"?"bg-slate-800 sticky left-6 z-20":""}`,children:N[x]},x)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 bg-slate-900/80 backdrop-blur-sm border border-white/10 rounded-xl overflow-hidden flex flex-col shadow-xl relative",children:e.jsxs("div",{className:"overflow-x-auto flex-1 custom-scrollbar",children:[e.jsxs("table",{className:"w-full text-left border-separate border-spacing-0 text-[10px] md:text-xs min-w-[700px]",children:[e.jsx("thead",{className:"sticky top-0 z-10",children:e.jsxs("tr",{className:"bg-gradient-to-r from-slate-800 via-slate-800/95 to-slate-800 text-slate-300 font-semibold uppercase tracking-wider",children:[e.jsx("th",{className:"py-2 px-1.5 md:px-2 w-8 text-center border-b-2 border-b-indigo-500/50 border-r border-r-indigo-500/30 bg-slate-800 sticky left-0 z-20",children:e.jsx("button",{onClick:()=>k(!0),className:"p-1 hover:bg-amber-500/20 rounded transition-colors",title:"Reorder columns",children:e.jsx(ge,{size:12,className:"text-amber-400"})})}),p.map(x=>f(x))]})}),e.jsx("tbody",{children:e.jsx(U,{children:s.map((x,v)=>{const C=v%2===0,T=be(x.priority),z=Q[v%Q.length];return e.jsxs(A.tr,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},transition:{duration:.2,delay:v*.02},className:`group hover:bg-white/5 transition-all duration-150 ${C?"bg-slate-900/50":"bg-slate-800/30"} ${T.rowBg}`,children:[e.jsx("td",{className:`py-1.5 px-1.5 md:px-2 text-center text-slate-500 font-mono text-[9px] border-b ${z} border-r border-r-indigo-500/20 bg-slate-900/80 sticky left-0 z-10`,children:v+1}),p.map(P=>r(P,x,v))]},x.id)})})})]}),s.length===0&&e.jsx(yt,{t})]})}),e.jsx(U,{children:u.isOpen&&e.jsx(gt,{isOpen:u.isOpen,title:u.title,description:u.description,onClose:h})}),e.jsx(U,{children:m&&e.jsx(ft,{isOpen:m,columns:p,columnLabels:N,onSave:S,onClose:()=>k(!1)})})]})},yt=({t:s})=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-10 text-slate-500",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500/20 to-orange-500/10 rounded-xl flex items-center justify-center mb-2 border border-amber-500/20",children:e.jsx(ee,{size:20,className:"text-amber-400"})}),e.jsx("p",{className:"text-xs font-medium",children:s.none}),e.jsx("p",{className:"text-[10px]",children:s.clickNew})]}),Nt={en:{title:"Assignments",allSubjects:"All Subjects",allStatus:"All Status",pending:"Pending",completed:"Completed",new:"New",taskName:"Task Name",description:"Description",subject:"Subject",type:"Type",dueDate:"Due Date",status:"Status",time:"Time",duration:"Duration",priority:"Priority",actions:"Actions",addNew:"Add new row...",none:"No assignments yet",clickNew:'Click "New" to add one',deleteTitle:"Delete Assignment",deleteMsg:"Are you sure? This cannot be undone.",delete:"Delete",cancel:"Cancel",overdue:"OVERDUE",today:"TODAY",soon:"SOON",save:"Save",addTask:"Add Task",editTask:"Edit Task",startTime:"Start Time",endTime:"End Time",enterDesc:"Enter description..."},bn:{title:"অ্যাসাইনমেন্ট",allSubjects:"সব বিষয়",allStatus:"সব স্ট্যাটাস",pending:"বাকি আছে",completed:"সম্পন্ন",new:"নতুন",taskName:"টাস্কের নাম",description:"বিবরণ",subject:"বিষয়",type:"ধরন",dueDate:"তারিখ",status:"স্ট্যাটাস",time:"সময়",duration:"সময়কাল",priority:"গুরুত্ব",actions:"অ্যাকশন",addNew:"নতুন টাস্ক যোগ করুন...",none:"কোনো অ্যাসাইনমেন্ট নেই",clickNew:'"নতুন" ক্লিক করুন',deleteTitle:"মুছে ফেলুন",deleteMsg:"আপনি কি নিশ্চিত?",delete:"মুছুন",cancel:"বাতিল",overdue:"মেয়াদ শেষ",today:"আজ",soon:"শীঘ্রই",save:"সংরক্ষণ",addTask:"নতুন টাস্ক",editTask:"সম্পাদনা",startTime:"শুরুর সময়",endTime:"শেষের সময়",enterDesc:"বিবরণ লিখুন..."}},pe=()=>({title:"",description:"",subject:"",date:"",type:"",priority:"",status:"",startTime:"",endTime:""}),Pt=()=>{const{currentUser:s}=Ce(),[t,n]=b.useState([]),[o,i]=b.useState(!1),[a,d]=b.useState(null),[u,g]=b.useState("All"),[p,l]=b.useState("All"),[m,k]=b.useState(De),[N,j]=b.useState(!0),[h,S]=b.useState(null),[r,f]=b.useState(pe()),x=async()=>{if(s){try{const[c,w]=await Promise.all([Me(s.uid),Te(s.uid)]);n(c),k(w),f(M=>({...M,type:w.types[0]||"",priority:w.priorities[1]||"",status:w.statuses[0]||""}))}catch(c){console.error("Error loading data:",c)}j(!1)}};b.useEffect(()=>{x()},[s]);const v=m.language||"bn",C=Nt[v],T=async c=>{if(c.preventDefault(),!s)return;const w={userId:s.uid,title:r.title,description:r.description,subject:r.subject,dueDate:new Date(r.date).getTime(),priority:r.priority,status:r.status,type:r.type,startTime:r.startTime,endTime:r.endTime};try{a?await le(a,w):await $e(w),await x(),F()}catch(M){console.error("Error saving:",M)}},z=async c=>{const w=t.find(M=>M.id===c);n(M=>M.filter(E=>E.id!==c)),S(null);try{await ze(c)}catch(M){console.error("Error deleting:",M),w&&n(E=>[...E,w])}},P=async c=>{const w=m.statuses.indexOf(c.status),M=m.statuses[(w+1)%m.statuses.length];n(E=>E.map(R=>R.id===c.id?{...R,status:M}:R));try{await le(c.id,{status:M})}catch(E){console.error("Error toggling status:",E),n(R=>R.map(q=>q.id===c.id?{...q,status:c.status}:q))}},$=c=>{f({title:c.title,description:c.description||"",subject:c.subject,date:I(new Date(c.dueDate),"yyyy-MM-dd"),priority:c.priority,status:c.status,type:c.type||"",startTime:c.startTime||"",endTime:c.endTime||""}),d(c.id),i(!0)},F=()=>{f(pe()),d(null),i(!1)},K=t.filter(c=>{const w=u==="All"||c.subject===u,M=p==="All"||(p==="Pending"?c.status!==m.statuses[m.statuses.length-1]:c.status===p);return w&&M}).sort((c,w)=>!c.startTime&&!w.startTime?0:c.startTime?w.startTime?c.startTime.localeCompare(w.startTime):-1:1);return N?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):e.jsxs("div",{className:"h-full flex flex-col space-y-4",children:[e.jsx(xt,{title:C.title,subjectFilter:u,statusFilter:p,subjects:[...new Set(t.map(c=>c.subject))],onSubjectChange:g,onStatusChange:l,onAddClick:()=>i(!0),t:C}),e.jsx(jt,{assignments:K,t:C,lang:v,onEdit:$,onDelete:S,onToggleStatus:P,onAddClick:()=>i(!0)}),e.jsx(mt,{isOpen:o,editingId:a,title:r.title,description:r.description,subject:r.subject,date:r.date,type:r.type,priority:r.priority,status:r.status,startTime:r.startTime,endTime:r.endTime,setTitle:c=>f(w=>({...w,title:c})),setDescription:c=>f(w=>({...w,description:c})),setSubject:c=>f(w=>({...w,subject:c})),setDate:c=>f(w=>({...w,date:c})),setType:c=>f(w=>({...w,type:c})),setPriority:c=>f(w=>({...w,priority:c})),setStatus:c=>f(w=>({...w,status:c})),setStartTime:c=>f(w=>({...w,startTime:c})),setEndTime:c=>f(w=>({...w,endTime:c})),onSubmit:T,onClose:F,subjects:m.subjects,types:m.types,statuses:m.statuses,priorities:m.priorities,lang:v}),e.jsx(Ue,{isOpen:!!h,title:C.deleteTitle,message:C.deleteMsg,confirmText:C.delete,cancelText:C.cancel,onConfirm:()=>h&&z(h),onCancel:()=>S(null)})]})};export{Nt as T,bt as calcDuration,pe as createInitialFormState,Pt as default,be as getPriorityStyle,pt as getStatusStyle,Ne as getTimeStatus,Ot as getTypeColor,ve as getTypeStyle,At as getUrgencyBadge};
